## Libraries
library(tidyverse)
library(vroom)
library(patchwork)
library(DataExplorer)
library(tidymodels)
setwd("./KaggleBikeShare")
## Read in the Data
bike <- vroom("./train.csv")
library(tidyverse)
library(vroom)
library(tidymodels)
setwd("./KaggleBikeShare")
bike <- vroom("./train.csv")
bike(bike$weather == 4,)
bike$weather(bike$weather == 4,)
bike$weather(bike$weather == 4)
View(bike)
bike[bike$weather == 4,] <- 3
bike$weather[bike$weather == 4,] <- 3
bike$weather[bike$weather == 4] <- 3
bike %>%
mutate(weather == 4, 3)
bike <- vroom("./train.csv")
bike <- bike %>%
mutate(weather == 4, 3)
bike <- bike %>%
mutate_at(weather == 4, 3)
bike <- bike %>%
mutate_at(bike$weather == 4, 3)
bike <- bike %>%
mutate_at('weather' == 4, 3)
bike <- bike %>%
mutate_at(weather == 4, 3)
bike <- bike %>%
mutate_if(weather == 4, 3)
bike <- bike %>%
mutate_if("weather" == 4, 3)
my_recipe <- recipe(data = bike) %>%
step_num2factor(weather, levels = c(1,2,3,4))
bike %>%
mutate(weather = ifelse(weather == 4,3,weather))
bike <- bike %>%
mutate(weather = ifelse(weather == 4,3,weather))
my_recipe <- recipe(data = bike) %>%
step_num2factor(weather, levels = c("sunny","cloudy","rainy","snowy"))
my_recipe <- recipe(data = myDataset) %>%
step_num2factor(weather, levels = c("sunny","cloudy","rainy","snowy"))
View(bike)
my_recipe <- recipe(count ~ season + holiday + weather, data = bike) %>%
step_num2factor(weather, levels = c("sunny","cloudy","rainy","snowy"))
bike <- vroom("./train.csv")
bike <- bike %>%
mutate(weather = ifelse(weather == 4,3,weather))
my_recipe <- recipe(count ~ season + holiday + weather, data = bike) %>%
step_num2factor(weather, levels = c("sunny","cloudy","rainy","snowy"))
prepped_recipe <- prep(my_recipe)
new <- vroom("test.csv")
bake(prepped_recipe, new_data = new)
my_recipe <- recipe(count ~ season + holiday + weather, data = bike) %>%
step_num2factor(weather, levels = c(1,2,3,4))
my_recipe <- recipe(count ~ season + holiday + weather, data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4'))
prepped_recipe <- prep(my_recipe)
new <- vroom("test.csv")
bake(prepped_recipe, new_data = new)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4'))
prepped_recipe <- prep(my_recipe)
new <- vroom("test.csv")
bake(prepped_recipe, new_data = new)
bike <- vroom("./train.csv")
bike <- bike %>%
mutate(weather = ifelse(weather == 4,3,weather)) %>%
select(-casual, -registered)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4'))
prepped_recipe <- prep(my_recipe)
new <- vroom("test.csv")
bake(prepped_recipe, new_data = new)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1')) %>%
step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow")
prepped_recipe <- prep(my_recipe)
new <- vroom("test.csv")
bake(prepped_recipe, new_data = new)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1')) %>%
step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow")
prepped_recipe <- prep(my_recipe)
bike <- vroom("./train.csv")
bike <- bike %>%
mutate(weather = ifelse(weather == 4,3,weather)) %>%
select(-casual, -registered)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1')) %>%
step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
#step_num2factor(season, levels = c('0','1')) %>%
# step_num2factor(holiday, levels = c('0','1')) %>%
#step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow")
prepped_recipe <- prep(my_recipe)
new <- vroom("test.csv")
bake(prepped_recipe, new_data = new)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
# step_num2factor(holiday, levels = c('0','1')) %>%
#step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1')) %>%
#step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow")
prepped_recipe <- prep(my_recipe)
View(bike)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_date(datetime, features = "dow")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
new <- vroom("test.csv")
bake(prepped_recipe, new_data = new)
baked <- bake(prepped_recipe, new_data = new)
View(baked)
View(bike)
baked <- bake(prepped_recipe, new_data = bike)
View(baked)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1'))
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(workingday, levels = c('0','1'))
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
#step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
#step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
bike <- vroom("./train.csv")
bike <- bike %>%
mutate(weather = ifelse(weather == 4,3,weather)) %>%
select(-casual, -registered)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
#step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(workingday, levels = c('0','1')) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
unique(bike$holiday)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1')) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
baked <- bake(prepped_recipe, new_data = bike)
View(baked)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday + workingday, levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, workingday, levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(any_of(holiday, workingday), levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(c(holiday, workingday), levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season) %>%
#step_num2factor(holiday, levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
baked <- bake(prepped_recipe, new_data = bike)
View(baked)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>%
step_num2factor(season, levels = c('0','1')) %>%
step_num2factor(holiday, levels = c('0','1'), transform = function(x) x + 1) %>%
step_num2factor(workingday, levels = c('0','1'), transform = function(x) x + 1) %>%
step_date(datetime, features = "dow") %>%
step_time(datetime, features = "hour")
prepped_recipe <- prep(my_recipe)
baked <- bake(prepped_recipe, new_data = bike)
head(baked)
head(baked)
head(baked)
head(baked, 10)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>% #change to factor
step_num2factor(season, levels = c('0','1')) %>% #change to factor
step_num2factor(holiday, levels = c('0','1'), transform = function(x) x + 1) %>% #change to factor
step_num2factor(workingday, levels = c('0','1'), transform = function(x) x + 1) %>% #change to factor
step_date(datetime, features = "dow") %>% #get day of the week
step_time(datetime, features = "hour") %>% #get hour of day
step_select(-datetime)
prepped_recipe <- prep(my_recipe)
baked <- bake(prepped_recipe, new_data = bike)
head(baked, 10)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>% #change to factor
step_num2factor(season, levels = c('0','1')) %>% #change to factor
step_num2factor(holiday, levels = c('0','1'), transform = function(x) x + 1) %>% #change to factor
step_num2factor(workingday, levels = c('0','1'), transform = function(x) x + 1) %>% #change to factor
step_date(datetime, features = "dow") %>% #get day of the week
step_time(datetime, features = "hour") %>% #get hour of day
step_zv(all_predictors()) %>%
step_select(-datetime)
prepped_recipe <- prep(my_recipe)
baked <- bake(prepped_recipe, new_data = bike)
head(baked, 10)
my_recipe <- recipe(count ~ ., data = bike) %>%
step_num2factor(weather, levels = c('1','2','3','4')) %>% #change to factor
step_num2factor(season, levels = c('0','1')) %>% #change to factor
step_num2factor(holiday, levels = c('0','1'), transform = function(x) x + 1) %>% #change to factor
step_num2factor(workingday, levels = c('0','1'), transform = function(x) x + 1) %>% #change to factor
step_date(datetime, features = "dow") %>% #get day of the week
step_time(datetime, features = "hour") %>% #get hour of day
step_zv(all_predictors()) %>%
step_rm(datetime)
prepped_recipe <- prep(my_recipe)
baked <- bake(prepped_recipe, new_data = bike)
head(baked, 10)
